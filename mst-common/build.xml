<!--
  * Copyright (c) 2009 University of Rochester
  *
  * This program is free software; you can redistribute it and/or modify it under the terms of the MIT/X11 license. The text of the
  * license can be found at http://www.opensource.org/licenses/mit-license.php and copy of the license can be found on the project
  * website http://www.extensiblecatalog.org/.
  *
  -->
<project name="mst-common" default="mst-common-help" xmlns:ivy="antlib:org.apache.ivy.ant">

	<dirname property="mc.dir" file="${ant.file.mst-common}" />
	
	<property file="${mc.dir}/build.properties" />

	<path id="mc.classpath">
		<fileset dir="${mc.build.lib}">
			<include name="*.jar" />
		</fileset>
	</path>

	<target name="clean">
		<delete dir="${mc.build.dir}" />
	</target>

	<target name="help">
		<echo>
			mst-common help
			mc.src.dir: ${mc.src.dir}
			mc.src.java: ${mc.src.java}
			mc.build.dir: ${mc.build.dir}
			mc.build.ivy.report: ${mc.build.ivy.report}
		</echo>
	</target>

	<target name="init">
		<mkdir dir="${mc.build.test.classes}" />
		<mkdir dir="${mc.build.classes}" />
		<mkdir dir="${mc.build.lib}" />
		<taskdef resource="org/apache/ivy/ant/antlib.xml"
				uri="antlib:org.apache.ivy.ant"
				classpathref="ivy.lib.path" />
	</target>

	<target name="resolve" depends="init">
		<ivy:resolve file="${mc.dir}/ivy.xml"/>
	</target>

	<target name="ivy-report" depends="resolve"
			description="--> report the resolve actions">
		<mkdir dir="${mc.build.ivy.report}" />
		<ivy:report todir="${mc.build.ivy.report}" />
	</target>

	<target name="retrieve" depends="ivy-report">
		<ivy:retrieve sync="true" pattern="${mc.build.lib}/[artifact].[ext]"/>
	</target>

	<target name="compile">
		<javac srcdir="${mc.src.dir}"
			destdir="${mc.build.classes}"
			classpathref="mc.classpath"
			debug="on"
			deprecation="on"
			debuglevel="lines,vars,source"/>
	</target>

	<!--
	ivy
	setup up classpath
	copy resources
	compile
	jar
	-->

</project>
