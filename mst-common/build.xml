<!--
  * Copyright (c) 2009 University of Rochester
  *
  * This program is free software; you can redistribute it and/or modify it under the terms of the MIT/X11 license. The text of the
  * license can be found at http://www.opensource.org/licenses/mit-license.php and copy of the license can be found on the project
  * website http://www.extensiblecatalog.org/.
  *
  -->
<project name="mst-common" default="mst-common-help" xmlns:ivy="antlib:org.apache.ivy.ant">

	<dirname property="mst-common.dir" file="${ant.file.mst-common}" />
	
	<property file="${mst-common.dir}/build.properties" prefix="mst-common" />
	<property file="${mst-common.dir}/build.properties" />

	<target name="help">
		<echo>
			mst-common help
			${src.dir}
		</echo>
	</target>

	<target name="init">
		<mkdir dir="${mst-common.build.test.classes}" />
		<mkdir dir="${mst-common.build.classes}" />
		<mkdir dir="${mst-common.build.lib}" />
		<mkdir dir="${mst-common.build.ivy.report}" />
		<taskdef resource="org/apache/ivy/ant/antlib.xml"
				uri="antlib:org.apache.ivy.ant"
				classpathref="ivy.lib.path" />
	</target>

	<!-- Ivy depencency report -->
	<target name="ivy-report" depends="resolve"
	   description="--> report the resolve actions">
	   <mkdir dir="${ivy.report.dir}" />
	   <ivy:report todir="${mst-common.build.ivy.report}" />
	</target>

	<!-- use ivy to retive the jar files into the repository set by the
		ivy configuration settings -->
	<target name="resolve"
		depends="init"
		description="--> places the files in the ivy repository">
		<ivy:resolve file="${mst-common.dir}/ivy.xml"/>
	</target>

	<target name="clean">
		<delete dir="${mst-common.build.dir}" />
	</target>

	<target name="compile">
		<javac srcdir="${mst-common.src.dir}"
			destdir="${mst-common.build.classes}"
			classpathref="mst-common.classpath"
			debug="on"
			deprecation="on"
			debuglevel="lines,vars,source"/>
	</target>

	<!--
	ivy
	setup up classpath
	copy resources
	compile
	jar
	-->

</project>
